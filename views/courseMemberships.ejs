<% layout('layout') -%>
<div class="container">
  <h1 class="mt-3 mb-3">Course Members <%=semester_name%> <%=module_code%></h1>
  <%-partial('./partials/messages', { messages: flash() })%>
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <% if (user.is_admin) { %>
        <th scope="col">ID</th>
        <% } %>
        <th scope="col">Role</th>
      </tr>
    </thead>
    <tbody>
      <% for(var i=0; i<data.length; i++) { %>
      <tr>
        <td><%= data[i].name%></td>
        <% if (user.is_admin) { %>
        <td><%= data[i].id%></td>
        <% } %>
        <td><%= data[i].role%></td>
        <td>
        <% if (permissions.can_view_dashboard) { %>
          <a href="<%= userDashboardPath(data[i].id) %>" class="btn btn-primary">
            <i class="far fa-eye"></i>
          </a>
        <% } %>
        <% if (permissions.can_delete_user) { %>
          <%-partial('./partials/deleteButton',{ action: courseMembershipDeletePath(semester_name, module_code, data[i].id) })%>
        <% } %>
        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>