<% layout('layout') -%>
<div class="container col-md-4 col-md-offset-4">
  <h1 class="text-center mt-3 mb-3">Update Profile</h1>
  <%-partial('./partials/messages', messages)%>
  <form id="user_form" action="/users/<%=user.id%>" role="form" method="POST">
    <input type="hidden" name="_method" value="PUT" />
    <div class="form-group">
      <label for="id">User ID</label>
      <input
        type="text"
        class="form-control"
        id="id"
        name="id"
        aria-describedby="idHelp"
        required="required"
        value="<%=user.id%>"
        disabled="true"
      />
      <small id="idHelp" class="form-text text-muted">Note: User ID cannot be edited.</small>
    </div>
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" class="form-control" id="name" name="name" required="required" value="<%=user.name%>" />
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input
        type="password"
        class="form-control"
        id="password"
        name="password"
        placeholder="Enter your password"
        required="required"
      />
    </div>
    <button type="submit" class="btn btn-primary">Update</button>
  </form>
</div>

<% script('javascripts/userForm.js') -%>
<script>
  (function() {
    window.addEventListener(
      'load',
      function() {
        const forms = [document.getElementById('user_form')];
        Array.prototype.filter.call(forms, function(form) {
          form.addEventListener('submit', check, false);
        });
      },
      false
    );
  })();
</script>
